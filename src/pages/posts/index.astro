---
import Footer from "@/components/footer/Footer.astro";
import Header from "@/components/header/Header.astro";
import Main from "@/components/posts/main/Main.astro";
import Layout from "@/layouts/Layout.astro";
import type Frontmatter from "@/types/Frontmatter";
import type Metadata from "@/types/Metadata";
import DefaultMetadata from "@/utils/DefaultMetadata";
import type { MarkdownInstance } from "astro";

const posts: MarkdownInstance<Frontmatter>[] = await Astro.glob<Frontmatter>("../../../posts/*.md");

const frontmatters: Frontmatter[] = posts
  .filter((post) => post.frontmatter.isActive)
  .map((post) => post.frontmatter);

const metaData: Metadata = {
  ...DefaultMetadata,
};
---

<Layout metadata={metaData}>
  <Header navigate="posts" />
  <Main frontmatters={frontmatters} tag="" />
  <Footer />
</Layout>
