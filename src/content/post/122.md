---
isActive: true
number: 122
title: XRに関する活動の全体像
date: 2025/06/04
tags:
  - xr
  - kajilab
options:
  description: 大学に入ってからのXR（MRPlatform）に関する活動の全体像です。
  repository: null
  youtube: null
  website: null
  image: https://img.esa.io/uploads/production/attachments/21734/2025/06/04/148413/b79c8bfb-1172-4baf-b8f5-c0525695dd25.png
---



# XR の簡単な説明
## XRとは
AR（拡張現実）、VR（仮想現実）、MR（複合現実）などのデジタルな仮想空間とユーザーがITデバイスを通じて交流する技術の総称

メタバースやデジタルツインが含まれることもある

## 代表的な3つの技術
<table class="ar-vr-mr_table tab1"><colgroup> <col class="first-cell-w"> <col class="sub-cell-w"> <col class="sub-cell-w"> <col class="sub-cell-w"> </colgroup>
<thead>
<tr>
<th><span style="font-size: 12pt;">&nbsp;</span></th>
<th class="txt_c"><span style="font-size: 12pt;">AR（拡張現実）</span></th>
<th class="txt_c"><span style="font-size: 12pt;">MR（複合現実）</span></th>
<th class="txt_c"><span style="font-size: 12pt;">VR（仮想現実）</span></th>
</tr>
</thead>
<tbody>
<tr>
<th><span style="font-size: 12pt;">世界観</span></th>
<td><span style="font-size: 12pt;">現実世界が主体</span></td>
<td><span style="font-size: 12pt;">現実世界が主体だが仮想世界とも融合している</span></td>
<td><span style="font-size: 12pt;">100％バーチャルの世界</span></td>
</tr>
<tr>
<th><span style="font-size: 12pt;">技術</span></th>
<td><span style="font-size: 12pt;">現実（リアル）の世界にデジタル情報を呼び出し出現させることで、現実の世界を拡張する技術</span></td>
<td><span style="font-size: 12pt;">現実世界を仮想世界に反映させることで、仮想のものに近づいたりデジタルコンテンツを直接操作できる技術</span></td>
<td><span style="font-size: 12pt;">100%仮想（バーチャル）の世界に入り込み、見たり感じたりとリアルに近い体験ができる技術</span></td>
</tr>
<tr>
<th><span style="font-size: 12pt;">デバイス</span></th>
<td>
<ul>
<li><span style="font-size: 12pt;">スマートフォン</span></li>
<li><span style="font-size: 12pt;">タブレット</span></li>
<li><span style="font-size: 12pt;">ARグラス</span></li>
<li><span style="font-size: 12pt;">スマートグラス</span></li>
</ul>
</td>
<td>
<ul>
<li><span style="font-size: 12pt;">HMD（ヘッドマウントディスプレイ）型のVRゴーグル・VRヘッドセット</span></li>
<li><span style="font-size: 12pt;">スマートフォン</span></li>
</ul>
</td>
<td>
<ul>
<li><span style="font-size: 12pt;">HMD（ヘッドマウントディスプレイ）型のヘッドセット</span></li>
<li><span style="font-size: 12pt;">サングラス型のMRグラス</span></li>
</ul>
</td>
</tr>
<tr>
<th><span style="font-size: 12pt;">利用シーン</span></th>
<td>
<ul>
<li><span style="font-size: 12pt;">企業のマーケティング、プロモーション</span></li>
<li><span style="font-size: 12pt;">小売・EC業界</span></li>
<li><span style="font-size: 12pt;">エンターテインメント（ゲームやSNS）</span></li>
<li><span style="font-size: 12pt;">教育</span></li>
<li><span style="font-size: 12pt;">業務効率化</span></li>
<li><span style="font-size: 12pt;">ナビゲーション</span></li>
</ul>
</td>
<td>
<ul>
<li><span style="font-size: 12pt;">シミュレーション</span></li>
<li><span style="font-size: 12pt;">コミュニケーション</span></li>
<li><span style="font-size: 12pt;">業務効率化</span></li>
<li><span style="font-size: 12pt;">医療</span></li>
</ul>
</td>
<td>
<ul>
<li><span style="font-size: 12pt;">エンターテインメント（ゲームや映画）</span></li>
<li><span style="font-size: 12pt;">スポーツ・スポーツ観戦</span></li>
<li><span style="font-size: 12pt;">教育</span></li>
<li><span style="font-size: 12pt;">研修、訓練</span></li>
<li><span style="font-size: 12pt;">不動産</span></li>
<li><span style="font-size: 12pt;">バーチャル旅行</span></li>
</ul>
</td>
</tr>
</tbody>
</table>

## 技術的な補足
### AR（拡張現実）
#### ビジョンベースAR
**マーカー型AR**
<img width="1200" alt="image.png (320.1 kB)" src="https://img.esa.io/uploads/production/attachments/13979/2024/05/23/148413/8e0a5bd2-7586-4de9-b86a-944e31733e82.png">

カメラを通じて、カードなどに印刷されたマーカーを読み取り、その上で展開されるARコンテンツを受け取る
- ARマーカーがカメラに収まっていないと使えない
- ARマーカーさえあればどこでも体験が得られる

[詳細](https://less-ar.jp/media/column/marker#:~:text=AR%E3%83%9E%E3%83%BC%E3%82%AB%E3%83%BC%E3%81%A8%E3%81%AF%E3%80%81%E7%8F%BE%E5%AE%9F,%E3%81%8C%E5%86%8D%E7%94%9F%E3%83%BB%E8%A1%A8%E7%A4%BA%E3%81%95%E3%82%8C%E3%81%BE%E3%81%99%E3%80%82)

**マーカーレス型AR**

カメラを通じて物体や空間を認識して表示を行う
単純にマーカーなしでAR表示を行うものを含まれる

<img width="290" alt="image.png (1.2 MB)" src="https://img.esa.io/uploads/production/attachments/21734/2024/11/09/148413/9b288058-0ded-4e6c-9edb-fce81ff38fb9.png">


#### ロケーションベースAR
GPS, VPS などの技術を利用して、現実に被せる形でコンテンツを表示するAR
<img width="1200" alt="image.png (4.2 MB)" src="https://img.esa.io/uploads/production/attachments/13979/2024/05/23/148413/8726ba87-3354-41ea-a2dc-bdaa0b3e3722.png">

- マーカーに頼らずに表示する
- その場所でのAR体験を生み出す

**VPS（Visual Positioning System）** *仮想化マシンの技術ではない
GPSとサーバに蓄積された世界中の街の画像と現在端末のカメラが写している映像を比較して位置推定を行う技術

- 世界中の街を撮影したデータ（屋内+屋内）
- 人工知能の学習のためにとんでもない量の計算資源を持つサーバ
- クライアントから送られてくるリアルタイムの映像データを処理するネットワーク
- 送られてきたデータを元に推定を行うサーバ

以上の4つが必要でバカみたいにコストが高い

[詳細](https://www.coco-ar.jp/service/vps/)

# XRProject の概要
<a href="https://esa-storage-tokyo.s3-ap-northeast-1.amazonaws.com/uploads/production/attachments/13979/2024/06/03/148413/5d5ced7b-f2da-46ff-bd70-44b71a75477d.pdf">
<iframe src="https://esa-storage-tokyo.s3-ap-northeast-1.amazonaws.com/uploads/production/attachments/13979/2024/11/09/148413/77ded143-0800-4699-9fcf-5b0fd0fa0493.pdf#toolbar=0&navpanes=0'" width="1280px" height="675px"></iframe>
</a>

# XRProject の目的
<a href="https://esa-storage-tokyo.s3-ap-northeast-1.amazonaws.com/uploads/production/attachments/13979/2024/11/09/148413/af7386e4-83d8-4995-b08c-d2b92d99a72b.pdf">
<iframe src="https://esa-storage-tokyo.s3-ap-northeast-1.amazonaws.com/uploads/production/attachments/13979/2024/11/09/148413/af7386e4-83d8-4995-b08c-d2b92d99a72b.pdf#toolbar=0&navpanes=0" width="1280px" height="675px"></iframe>
</a>

# XRProject / XRStudyWatch
MRPlatformの前段階、検証を兼ねた最小構成のプロジェクト

<iframe width="1280" height="675" src="https://www.youtube.com/embed/6viKnB63KqA" title="XRStudyWatchアプリデモ（説明あり）" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>

<iframe src="https://onedrive.live.com/embed?resid=E0A6431DF04167DF%213388&amp;authkey=%21ACs4DSZg_vnbCf8&amp;em=2&amp;wdAr=1.7777777777777777&amp;wdEaaCheck=0" width="1280px" height="675px" frameborder="0"></iframe>

## 技術構成
<img width="1280" alt="image.png (379.3 kB)" src="https://img.esa.io/uploads/production/attachments/13979/2024/11/09/148413/4522f3c7-ed40-4ffb-9ad1-db9829c79d25.png">

# XRProject / MRPlatform
<a href="https://esa-storage-tokyo.s3-ap-northeast-1.amazonaws.com/uploads/production/attachments/13979/2024/11/09/148413/9e58097c-8423-4a3e-8277-5102198ec050.pdf">
<iframe src="https://esa-storage-tokyo.s3-ap-northeast-1.amazonaws.com/uploads/production/attachments/13979/2024/11/09/148413/9e58097c-8423-4a3e-8277-5102198ec050.pdf#toolbar=0&navpanes=0" width="1280px" height="675px"></iframe>
</a>

## 設計にあたって追加で考えたこと
### コンテンツ表示基本方針
**パーソナライズされていること**
コンテンツにはまず多様性が求められる
様々な個性のあるレイヤーがあって、その中で配置されるコンテンツは、広告を目的とした事業的なものも個人が作った趣味のものも様々なものが存在している

その中から何らかの手段を利用して個人に適したコンテンツを選び、実際の表示を行う

**現実に則した表示**
複合現実を目指すからには、現実との融合感が必要になる
ただ単純にホログラムとして仮想空間上に存在しているだけではなく、現実の座標や空間の情報と合致した状態であるのが大切

> [!NOTE]
> **現実に則すというのは？**
>仮想空間上の座標と現実空間上の座標が同期されている
> 現実に存在するオブジェクトの形状や座標を反映したオクルージョンによる重なりの表現

### ユーザごとに不干渉なデジタルツインを生み出す手法
![](https://img.esa.io/uploads/production/attachments/13979/2024/06/19/148413/d3b17e79-77ae-42ca-b597-50308b389609.png)

<!-- 

# 現状の進捗

## バックエンド（API設計、DB設計）
大枠は完成
実装も9割くらい終わっている・バグと仕様の甘いところを詰めていく工程
<img width="1767" alt="image.png (368.7 kB)" src="https://img.esa.io/uploads/production/attachments/21734/2024/11/09/148413/a73747e6-94c2-4f9f-99ed-11b58b1a6585.png">



## フロントエンド
ライブラリ
- [react-three-fiber](https://github.com/pmndrs/react-three-fiber)
- [@react-three/drei](https://github.com/pmndrs/drei)
- [@react-three/xr](https://github.com/pmndrs/xr)

Reactで宣言的にThree.jsが扱えるライブラリを利用
Reactが動けば環境は関係ない
（以前はNext.jsを使っていたが、Next14がライブラリと相性が良くなく現在はVite（Astro）を利用）

### 仮想空間内に街並みを再現
[PLATEAU](https://www.mlit.go.jp/plateau/) を利用して街並みを再現
<iframe width="1280" height="675" src="https://www.youtube.com/embed/vmwmdkKnqEg" title="PLATEAU +three.js + next.js + App Router Demo movie" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>

### 現実空間に重ね合わせて投影
GPSによってユーザ座標を取得して座標変換を行い、仮想空間内の街並みを現実に沿わせる形で投影
<iframe width="1280" height="675" src="https://www.youtube.com/embed/gK3UeKp9eTw" title="0518_MRPlatform_現実空間に合ったPLATEAUのAR表示" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>

### 特定座標に対するオブジェクトの表示
<iframe width="1280" height="700" src="https://www.youtube.com/embed/-Y4cXSmDfxg" title="1104_WebAR_GPS_Object_View_demo" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>

## 屋内測位
現状の推定手法の多くはGPSやVPSを利用したものが一般的である
その中で屋内測位を利用してオブジェクトを表示する試みは実は新しい

### HMDのトラッキング
<iframe width="1280" height="700" src="https://www.youtube.com/embed/u6av22vph_8" title="10_30_MetaQuest_歩く様子_アニメーション_デモ" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>

### HMDを利用したPDR
HMDを使ったPDRは誰もやっていないといえばやっていない
ただPDR自体は手法としては新しくもないので研究的価値があるかというと微妙
[MRとPDRを組み合わせた研究は存在する](https://www.computer.org/csdl/proceedings-article/ismar/2015/7660a204/12OmNvlPkzp)

[実装してみたもの](https://github.com/kanakanho/kajilab/blob/main/metaquest/walk%26stairs/movement_11_stairs.ipynb)
<img width="3964" alt="image.png (1.3 MB)" src="https://img.esa.io/uploads/production/attachments/21734/2024/11/09/148413/7504ad3d-9e4c-4ce2-9c26-41e6f89d875c.png">

### 課題
方位の取得

-->

# 対外発表：複数のMRコンテンツを統一的に利用できるMRアプリの基礎検討

## 概要

<img width="1921" alt="研究説明一枚絵.png (1.4 MB)" src="https://img.esa.io/uploads/production/attachments/21734/2025/06/04/148413/6ffd8109-aba4-4926-9e39-e812ca653e3a.png">

現実空間とコンピュータ空間の間には大きな壁があります。現実の世界のものを見るのと同じように、コンピュータの中にある仮想的なコンテンツが閲覧できると、コンピュータの中の世界が現実にとても近いものになります。今回の発表では、特定の形式に従ってインターネット上に公開されたコンテンツであれば、誰が公開したのかに関わらず、今自分が近くにいる場所の近くにあるコンテンツを現実の特定の場所に紐づく形で同時に閲覧ができるアプリについて検討を行い、実際の動作を確認しました。

## 関連記事

全体の流れ
https://www.kanakanho.dev/posts/74
発表に関して
https://www.kanakanho.dev/posts/91

## 発表資料

<iframe src="https://1drv.ms/p/c/e0a6431df04167df/IQQXRcWWHWTCR4Od6gB_iJ3iARzMuN7PNQ9dQymQdTlz2Vg?em=2&amp;wdAr=1.7777777777777777" width="1280px" height="675px" frameborder="0"></iframe>
